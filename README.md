# 🛍️ VapeShop Bot v3

Telegram бот с Mini App — магазин с **кислотным дизайном**, **новостями**, **промокодами** и **обязательной подпиской**.

## ✨ Возможности v3

### Для пользователей:
- 🛒 **Магазин** — прозрачные элементы, кислотные цвета
- 📰 **Новости** — лента новостей с фото
- 🎁 **Промокоды** — система скидок
- 📱 **Mini App** — красивый дизайн в стиле Glassmorphism
- 🔔 **Подписка** — обязательная подписка на канал

### Для администраторов:
- 📊 **Статистика** магазина
- 📦 **Управление заказами** (статусы)
- 🛍️ **Добавление товаров** с фото
- 📰 **Новости** — публикация новостей
- 🎁 **Промокоды** — создание и управление
- 👥 **Пользователи** — список с заказами

## 🚀 Настройка

### 1. .env файл
```env
BOT_TOKEN=ваш_токен_от_BotFather
ADMIN_IDS=ваш_telegram_id
WEB_APP_URL=https://your-app.railway.app
PORT=8080
CHANNEL_ID=@vash_kanal
```

**Важно:** 
- `CHANNEL_ID` — ID или username канала (обязательно с @)
- Бот должен быть администратором канала!

### 2. Деплой на Railway

1. GitHub: https://github.com/kiop1-art/vape-shop-bot
2. Railway → New Project → Deploy from GitHub
3. Добавить переменные из .env
4. Деплой автоматический

### 3. Настройка канала

1. Добавь бота в канал как администратора
2. В @BotFather:
   - Bot Settings → Menu Button
   - URL: `https://your-app.railway.app`
   - Название: `🛒 Открыть магазин`

## 📁 Структура

```
lol/
├── bot/
│   ├── index.js          # Бот + API
│   ├── database.js       # SQLite (новости, промокоды)
│   └── keyboards.js      # Клавиатуры
├── webapp/
│   ├── index.html        # Mini App (2 вкладки: магазин/новости)
│   ├── styles.css        # Кислотный Glassmorphism
│   └── app.js            # Логика + промокоды
├── uploads/              # Фото товаров и новостей
├── package.json
└── .env
```

## 🎨 Mini App v3

**Дизайн:**
- Прозрачные элементы (Glassmorphism)
- Кислотные цвета (зелёный, розовый, голубой)
- Анимированный фон
- Плавные градиенты
- 2 вкладки: Магазин + Новости

**Функции:**
- Корзина с промокодами
- Оформление заказа
- Лента новостей
- Категории товаров

## 🛍️ Админ-панель

### Добавить товар:
1. **🛍️ Товары** → **➕ Добавить товар**
2. Отправьте: название → описание → цена → ID категории → фото

### Добавить новость:
1. **📰 Новости** → **📰 Добавить новость**
2. Отправьте: заголовок → текст → фото

### Создать промокод:
1. **🎁 Промокоды** → **🎁 Создать промокод**
2. Отправьте: код → % скидки → макс. использований (0 = безлимит)

## 🎁 Промокоды

Промокоды применяются в корзине:
1. Пользователь вводит код
2. Нажимает «Применить»
3. Скидка применяется к сумме заказа

**Типы:**
- С лимитом использований
- Безлимитные
- Процентная скидка (1-100%)

## 🔔 Обязательная подписка

При первом запуске:
1. Бот проверяет подписку на канал
2. Если не подписан — показывает кнопку «Я подписался»
3. После подписки — открывает доступ к магазину

## 📦 Команды

| Команда | Описание |
|---------|----------|
| /start | Приветствие + проверка подписки |
| 🛒 Каталог | Категории товаров |
| 📰 Новости | Лента новостей |
| 📦 Мои заказы | История заказов |
| 👤 Профиль | Информация |
| 📞 Поддержка | Контакты |

### Админ:
- 🔑 Админ-панель
- 📊 Статистика
- 📦 Заказы
- 🛍️ Товары
- 📰 Новости
- 🎁 Промокоды
- 👥 Пользователи

## 🔧 Деплой

### Railway
```
1. https://railway.app
2. Deploy from GitHub
3. Добавить переменные окружения
4. Готово!
```

### Локально
```bash
npm install
npm start
```

## 📝 Обновления v3

- ✅ Кислотный прозрачный дизайн
- ✅ Вкладка Новости
- ✅ Система промокодов
- ✅ Обязательная подписка
- ✅ Улучшенная админ-панель
- ✅ Анимации и эффекты

## 📄 Лицензия

ISC
